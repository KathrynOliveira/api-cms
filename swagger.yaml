openapi: 3.0.0
info:
  title: API CMS
  version: 1.0.0
  description: Documentação da API CMS
servers:
  - url: http://localhost:3000
paths:
  /auth/login:
    post:
      summary: Realiza login do usuário
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        "200":
          description: Login realizado com sucesso
          content:
            application/json:
              example:
                status: success
                message: "Autenticação bem-sucedida."
                data:
                  user:
                    id: 1
                    name: "João Silva"
                    email: "joao@email.com"
                    role: "user"
                  token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        "401":
          description: Credenciais inválidas
          content:
            application/json:
              example:
                status: error
                message: "Credenciais inválidas"
                details: null
  /users:
    get:
      summary: Lista todos os usuários
      tags:
        - Users
      responses:
        "200":
          description: Lista de usuários
          content:
            application/json:
              example:
                status: success
                message: "Usuários encontrados com sucesso."
                data:
                  {
                    items:
                      [
                        {
                          id: 1,
                          name: "João Silva",
                          email: "joao@email.com",
                          role: "ADMIN",
                          createdAt: "2024-01-01T12:00:00Z",
                          updatedAt: "2024-01-10T12:00:00Z",
                        },
                      ],
                    total: 1,
                    page: 1,
                    pageSize: 10,
                  }
    post:
      summary: Cria um novo usuário
      tags:
        - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
                role:
                  type: string
      responses:
        "201":
          description: Usuário criado
          content:
            application/json:
              example:
                status: success
                message: "Usuário criado com sucesso."
                data:
                  id: 3
                  name: "Novo Usuário"
                  email: "novo@email.com"
                  role: "AUTHOR"
  /users/me:
    get:
      summary: Retorna informações do próprio usuário autenticado
      tags:
        - Users
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Dados do usuário autenticado
          content:
            application/json:
              example:
                status: success
                message: "Dados do usuário recuperados com sucesso."
                data:
                  id: 1
                  name: "João Silva"
                  email: "joao@email.com"
                  role: "AUTHOR"
        "401":
          description: Não autenticado
          content:
            application/json:
              example:
                status: error
                message: "Acesso não autorizado. Token ausente."
                details: null
  /categories:
    get:
      summary: Lista todas as categorias
      tags:
        - Categories
      responses:
        "200":
          description: Lista de categorias
          content:
            application/json:
              example:
                status: success
                message: "Categorias encontradas com sucesso."
                data:
                  items:
                    - id: "uuid"
                      title: "Tecnologia"
                      slug: "tecnologia"
                      cretedAt: "2024-01-01T12:00:00Z"
                      updatedAt: "2024-01-10T12:00:00Z"
                    - id: "uuid"
                      title: "Educação"
                      slug: "educacao"
                      cretedAt: "2024-02-01T12:00:00Z"
                      updatedAt: "2024-02-10T12:00:00Z"
    post:
      summary: Cria uma nova categoria
      tags:
        - Categories
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                slug:
                  type: string
      responses:
        "201":
          description: Categoria criada
          content:
            application/json:
              example:
                status: success
                message: "Categoria criada com sucesso."
                data:
                  id: "uuid"
                  title: "Saúde"
                  slug: "saude"
    # Remoção de categoria é feita em /categories/{id} (delete)
  /categories/{id}:
    put:
      summary: Edita uma categoria existente
      tags:
        - Categories
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                slug:
                  type: string
      responses:
        "200":
          description: Categoria editada com sucesso
          content:
            application/json:
              example:
                status: success
                message: "Categoria editada com sucesso."
                data:
                  id: "uuid"
                  title: "Nova categoria"
                  slug: "nova-categoria"
        "404":
          description: Categoria não encontrada
          content:
            application/json:
              example:
                status: error
                message: "Categoria não encontrada."
                details: null
    delete:
      summary: Remove uma categoria existente
      tags:
        - Categories
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Categoria removida com sucesso
          content:
            application/json:
              example:
                status: success
                message: "Categoria removida com sucesso."
                data: null
        "404":
          description: Categoria não encontrada
          content:
            application/json:
              example:
                status: error
                message: "Categoria não encontrada."
                details: null
    # Remoção de artigo é feita em /articles/{id} (delete)
  /articles:
    get:
      summary: Lista todos os artigos
      tags:
        - Articles
      responses:
        "200":
          description: Lista de artigos paginados
          content:
            application/json:
              example:
                status: success
                message: "Artigos encontrados com sucesso."
                data:
                  items:
                    - id: "uuid"
                      title: "Primeiro artigo"
                      slug: "primeiro-artigo"
                      body: "Conteúdo do artigo"
                      categoryId: "uuid-category"
                      userId: "uuid-user"
                      cretedAt: "2024-03-01T12:00:00Z"
                      updatedAt: "2024-03-10T12:00:00Z"
                    - id: "uuid"
                      title: "Segundo artigo"
                      slug: "segundo-artigo"
                      body: "Conteúdo do segundo artigo"
                      categoryId: "uuid-category-2"
                      userId: "uuid-user-2"
                      cretedAt: "2024-04-01T12:00:00Z"
                      updatedAt: "2024-04-10T12:00:00Z"
    post:
      summary: Cria um novo artigo
      tags:
        - Articles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                body:
                  type: string
                categoryId:
                  type: string
      responses:
        "200":
          description: Artigo editado com sucesso
          content:
            application/json:
              example:
                status: success
                message: "Artigo editado com sucesso."
                data:
                  id: "uuid"
                  title: "Novo título"
                  body: "Novo conteúdo"
                  categoryId: "uuid-category"
                  userId: "uuid-user"
        "400":
          description: Erro ao editar artigo
          content:
            application/json:
              example:
                status: error
                message: "Erro ao editar artigo."
                details: "Mensagem de erro detalhada"
    delete:
      summary: Remove um artigo
      tags:
        - Articles
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Artigo removido com sucesso
          content:
            application/json:
              example:
                status: success
                message: "Artigo removido com sucesso."
                data: null
        "400":
          description: Erro ao remover artigo
          content:
            application/json:
              example:
                status: error
                message: "Erro ao remover artigo."
                details: "Mensagem de erro detalhada"
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
